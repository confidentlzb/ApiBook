##1. 接口简述
用户需要在操作主动还款后，输入验证码校验信息后，完成还款。

##2. 调用场景
当用户确认还款的金额后，点击我要还款时，当用户点击立即还款后，第三方机构将调用还呗提供的还款详情接口获取到当下用户需要还款的金额；若还款详情返回的金额与还款计划中的金额不一致，会弹框提示用户还款详情中的金额。第三方机构调用还呗提供的执行还款接口告知还呗去完成还款操作。



##3. 接口要求
* https接口
* 接口采用post方式
* 数据组织采用json传递。
* 性能要求：2s，超过2s后判断为超时。超时后不会重试。
* 幂等性要求：重复请求，还呗需返回相同结果。（由于可能出现网络超时，我们没有收到还呗返回的结果，我们会重试，若您返回非200，会导致用户无法完成后续操作）

##4. 还款方式说明
###4.1 验证码还款说明
1）需以下3个接口：

* [还款详情接口]
* [还款执行接口]
* 还款验证码接口
2）流程说明：

* 用户查看账单时，第三方机构会调用还呗提供的拉取还款计划接口更新还款计划。并同时，调用还呗提供的银行卡列表接口获取用户银行卡信息。最终展示给用户；
* 第三方机构支持用户选择保持当前银行卡还款，也可在返回的银行卡列表中更换银行卡，或绑定新的银行卡进行还款。具体用户是否可更换银行卡示还呗而定。最终通过绑卡接口告知还呗用户选择的银行卡。若用户新绑卡，还呗需调用第三方机构提供的绑卡结果反馈接口告知第三方机构绑卡是否成功，且当绑卡成功后，需要在银行卡列表接口更新还款的银行卡并更新还款计划中的银行卡。整个流程需在3s内完成；
* 用户需要主动还款，第三方机构将调用还呗提供的还款详情获取还款内容；
* 调用验证码接口获取验证码，用户输入验证码后，第三方机构调用还呗提供的还款验证码接口告知执行还款。
* 用户确认还款，第三方机构调用还呗提供的执行还款告知还款操作。 注意用户可能发起多次扣款，请做重复性校验，避免重复扣款；
* 还呗接收到执行还款请求后，需完成以下操作；
   * 当获知用户还款结果后，调用第三方机构的还款结果反馈接口告知还款结果；
   * 调用第三方机构提供的还款计划同步接口更新还款计划；
   * 若订单结清，调用第三方机构提供的订单状态同步接口更新订单状态。

##5. 接口定义
http://openapi.dev.lattebank.com/xxxchannel/confirm/repay?r_c=XXX(渠道代码大写)

参数|  名称|  值类型| 是否可空 | 备注
----------- | ------------- | ------------
order_no|  订单编号|  String|  Y| /
period_nos|  还款期数|  String|  Y |期数：1,2,3...all。all表示所有期。
只能是以上枚举值中的一种，不会出现1,2的情况。例如第一期，回传1。第二期，回传2。
repayment_id|  还款ID|  String|  Y| 必须，还呗可根据此ID关联一笔还款申请
verify_code |验证码 |String|  Y| 验证码



####5.1.1 请求参数示例
```
{
    "order_no": "245132241561415",
    "period_nos": "1",
    "repayment_id": "123",
    "verify_code": "234563"
}
```
####5.1.2 响应参数
无

####5.1.3 响应参数示例
```
{
  "code": 200,
  "message": ""
}
```


####5.1.4 异常说明
若没有匹配到对应的订单号，请当做异常情况返回。并在msg中告知没有找到订单号 code为非200时，均为异常情况，801为验证码错误。请在msg中返回具体的可读的中文失败原因。
```
{
  "code": 400,
  "message": "您请求的参数有误"
}
```

